\section{OBO Syntax}

\subsection{OBO File Structure}

An OBO file consists of a header followed by zero or more stanzas.

\begin{verbatim}
OBO-Doc := header { stanza }
\end{verbatim}

\subsection{OBO Header}

The header consists of a number of tag-value pairs, most of which we will ignore for the time being. Many of these (e.g., <remark> could clearly be treated as annotations; others (e.g., <default-namespace> correspond to parts of an XML document preamble.

\begin{verbatim}
header :=
   <format-version>
   [ <data-version> ]
   [ <date> ]
   [ <saved-by> ]
   [ <auto-generated-by> ]
   [ <subsetdef> ]
   { import }
   { <synonymtypedef> }
   { <idspace> }
   [ <default-relationship-id> ]
   { <idmapping> }
   [ <remark> ]
import := 'import:' <URL>
stanza := term-stanza | typedef-stanza | instance-stanza
\end{verbatim}

\subsection{Term Stanzas}

Term stanzas introduce and define the meaning of terms (AKA concepts, classes and unary predicates).

\begin{verbatim}
term-stanza :=
   '[Term]'
   termid-TVP
   'name:'<string>
   [ <namespace> ]
   { <alt_id> }
   [ <def> ]
   [ <comment> ]
   { <subset> }
   { <synonym> }
   { <xref> }
   { isa-TVP }
   { intersection-TVP }
   { union-TVP }
   { disjoint-TVP }
   { relationship-TVP }
   [ created_by-TVP ]
   [ creation_date-TVP ]
   [ <is_obsolete> ]
   { <replaced_by> }
   { <consider> }

termid-TVP :=
   'id:' term-id
   [ 'is_anonymous: true' ]
term-id := <string>

isa-TVP :=
   'is_a:' term-id
   [ 'namespace=' <namespace-id> ]
   [ 'derived=true' | 'derived=false' ]

intersection-TVP :=
   'intersection_of:' termOrRestr
   [ 'namespace=' <namespace-id> ]
termOrRestr := term-id | restriction
restriction := relationship-id term-id
relationship-id := <string>

union-TVP :=
   'union_of:' termOrRestr
   [ 'namespace=' <namespace-id> ]

disjoint-TVP :=
   'disjoint_from:' term-id
   [ 'namespace=' <namespace-id> ]
   [ 'derived=true' | 'derived=false' ]

relationship-TVP :=
   'relationship:' restriction
   [ 'not_necessary=true' | 'not_necessary=false' ]
   [ 'inverse_necessary=true' | 'inverse_necessary=false' ]
   [ 'cardinality=' <non-neg-int> ]
   [ 'maxCardinality=' <non-neg-int> ]
   [ 'minCardinality=' <non-neg-int> ]
\begin{verbatim}

\subsection{Typedef Stanzas}

Typedef stanzas introduce and define the meaning of relations (AKA roles, properties and binary predicates).

typedef-stanza :=
   '[Typedef]'
   typedef-TVP
   'name:'<string>
   [ <namespace> ]
   { <alt_id> }
   [ <def> ]
   [ <comment> ]
   { <subset> }
   { <synonym> }
   { <xref> }
   [ domain-TVP ]
   [ range-TVP ]
   { meta-property-TVP }
   { r-isa-TVP }
   [ inverse-TVP ]
   [ transover-TVP ]
   { relationship-TVP }
   [ 'is_metadata_tag:true' | 'is_metadata_tag:false' ]
   [ created_by-TVP ]
   [ creation_date-TVP ]
   [ <is_obsolete> ]
   { <replaced_by> }
   { <consider> }

typedefid-TVP :=
   'id:' relationship-id
   [ 'is_anonymous: true' ]

domain-TVP := 'domain:' termOrReserved
termOrReserved := term-id | <reserved-id>

range-TVP := 'range:' termOrReserved

meta-property-TVP :=
   'is_anti_symmetric:true' | 'is_anti_symmetric:false' |
   'is_cyclic:true' | 'is_cyclic:false' |
   'is_reflexive:true' | 'is_reflexive:false' |
   'is_symmetric:true' | 'is_symmetric:false' |
   'is_transitive:true' | 'is_transitive:false'

r-isa-TVP := 'is_a:' relationship-id [ isa-mlist ]
isa-mlist := '{' isa-modifier { ',' isa-modifier } '}'
isa-modifier := namespace-mod | derived-mod
namespace-mod := 'namespace=' namespace-id
derived-mod := 'derived=true' | 'derived=false'

inverse-TVP := 'inverse:' relationship-id

transover-TVP := 'transitive_over:' relationship-id
2.5 Instance Stanzas

Instance stanzas introduce and define the meaning of instances (AKA individuals, individual names, constants).

instance-stanza :=
   '[Instance]'
   instanceid-TVP
   'name:'<string>
   [ <namespace>]
   { <alt_id> }
   [ <comment> ]
   { <synonym> }
   { <xref> }
   'instance_of:' term-id { 'instance_of:' term-id }
   { p-obj-value-TVP | p-data-value-TVP }
   [ created_by-TVP ]
   [ creation_date-TVP ]
   [ <is_obsolete> ]
   { <replaced_by> }
   { <consider> }

instanceid-TVP :=
   'id:' instance-id
   [ 'is_anonymous: true' ]

p-obj-value-TVP := 'property_value:' relationship-id instance-id

p-data-value-TVP := 'property_value:' relationship-id '"' <string> '"' <XML-Schema-datatype> 
